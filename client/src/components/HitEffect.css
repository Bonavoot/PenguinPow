.hit-effect {
  pointer-events: none;
}

/* ============================================
   SCREEN FLASH - Vignette style (edges only)
   Center stays clear, thin flash at edges
   ============================================ */
.screen-flash {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  /* Very tight vignette: only the very edge */
  background: radial-gradient(ellipse at center, 
    transparent 0%, 
    transparent 80%, 
    rgba(255, 255, 255, 0.3) 88%, 
    rgba(255, 255, 255, 0.8) 100%);
  pointer-events: none;
  z-index: 9999;
  opacity: 0;
}

.screen-flash.slap-flash {
  animation: vignetteFlashQuick 0.08s ease-out forwards;
}

.screen-flash.charged-flash {
  animation: vignetteFlashHeavy 0.12s ease-out forwards;
}

@keyframes vignetteFlashQuick {
  0% { opacity: 0.6; }
  100% { opacity: 0; }
}

@keyframes vignetteFlashHeavy {
  0% { opacity: 0.8; }
  100% { opacity: 0; }
}

/* ============================================
   SLAP ATTACK - Quick sharp starburst
   Like a manga impact - clean white burst
   ============================================ */
.hit-ring-wrapper.slap-hit {
  position: relative;
  width: clamp(50px, 6vw, 75px);
  height: clamp(50px, 6vw, 75px);
}

/* Central white burst */
.slap-hit .hit-ring {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  transform: translate(-50%, -50%);
}

.slap-hit .hit-ring::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 60%;
  height: 60%;
  background: white;
  border-radius: 50%;
  transform: translate(-50%, -50%) scale(0);
  animation: slapCorePop 0.15s ease-out forwards;
}

/* Sharp starburst lines - the classic manga impact */
.slap-hit .hit-ring::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  transform: translate(-50%, -50%) scale(0);
  background: 
    /* Main cross */
    linear-gradient(0deg, transparent 40%, white 45%, white 55%, transparent 60%),
    linear-gradient(90deg, transparent 40%, white 45%, white 55%, transparent 60%),
    /* Diagonal lines */
    linear-gradient(45deg, transparent 42%, white 47%, white 53%, transparent 58%),
    linear-gradient(-45deg, transparent 42%, white 47%, white 53%, transparent 58%);
  animation: slapBurstLines 0.18s ease-out forwards;
}

@keyframes slapCorePop {
  0% {
    transform: translate(-50%, -50%) scale(0);
    opacity: 1;
  }
  40% {
    transform: translate(-50%, -50%) scale(1.5);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -50%) scale(0.5);
    opacity: 0;
  }
}

@keyframes slapBurstLines {
  0% {
    transform: translate(-50%, -50%) scale(0.3);
    opacity: 1;
  }
  50% {
    transform: translate(-50%, -50%) scale(1.2);
    opacity: 0.9;
  }
  100% {
    transform: translate(-50%, -50%) scale(1.6);
    opacity: 0;
  }
}

/* ============================================
   CHARGED ATTACK - Balanced impact
   Core burst + ring + impact cross
   ============================================ */
.hit-ring-wrapper.charged-hit {
  position: relative;
  width: clamp(55px, 6.5vw, 80px);
  height: clamp(55px, 6.5vw, 80px);
}

.charged-hit .hit-ring {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  transform: translate(-50%, -50%);
}

/* Bright central burst */
.charged-hit .hit-ring::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 60%;
  height: 60%;
  background: radial-gradient(circle, white 0%, rgba(255, 255, 255, 0.8) 40%, transparent 100%);
  border-radius: 50%;
  transform: translate(-50%, -50%) scale(0);
  animation: chargedCorePop 0.22s ease-out forwards;
}

/* Impact cross lines */
.charged-hit .hit-ring::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 130%;
  height: 130%;
  background: 
    linear-gradient(0deg, transparent 42%, rgba(255, 255, 255, 0.9) 47%, rgba(255, 255, 255, 0.9) 53%, transparent 58%),
    linear-gradient(90deg, transparent 42%, rgba(255, 255, 255, 0.9) 47%, rgba(255, 255, 255, 0.9) 53%, transparent 58%);
  transform: translate(-50%, -50%) scale(0.3);
  animation: chargedCrossExpand 0.25s ease-out forwards;
}

/* Expanding ring */
.charged-hit::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 90%;
  height: 90%;
  border: 3px solid rgba(255, 255, 255, 0.9);
  border-radius: 50%;
  transform: translate(-50%, -50%) scale(0.4);
  animation: chargedRingExpand 0.35s ease-out forwards;
  pointer-events: none;
}

@keyframes chargedCorePop {
  0% {
    transform: translate(-50%, -50%) scale(0);
    opacity: 1;
  }
  40% {
    transform: translate(-50%, -50%) scale(1.8);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -50%) scale(1.3);
    opacity: 0;
  }
}

@keyframes chargedCrossExpand {
  0% {
    transform: translate(-50%, -50%) scale(0.3);
    opacity: 1;
  }
  50% {
    transform: translate(-50%, -50%) scale(1.2);
    opacity: 0.9;
  }
  100% {
    transform: translate(-50%, -50%) scale(1.6);
    opacity: 0;
  }
}

@keyframes chargedRingExpand {
  0% {
    transform: translate(-50%, -50%) scale(0.4);
    opacity: 1;
    border-width: 4px;
  }
  60% {
    opacity: 0.7;
    border-width: 2px;
  }
  100% {
    transform: translate(-50%, -50%) scale(2.2);
    opacity: 0;
    border-width: 1px;
  }
}

/* ============================================
   SPARK PARTICLES - Simple bright dots
   ============================================ */
.spark-particles {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 15;
}

.spark {
  position: absolute;
  border-radius: 50%;
  opacity: 0;
}

/* Slap sparks - fast white */
.slap-hit .spark { animation: sparkOut 0.2s ease-out forwards; }
.slap-hit .spark:nth-child(1) { --tx: 2vw; --ty: -1.5vw; }
.slap-hit .spark:nth-child(2) { --tx: -2vw; --ty: -1vw; animation-delay: 0.02s; }
.slap-hit .spark:nth-child(3) { --tx: 1.5vw; --ty: 2vw; animation-delay: 0.01s; }
.slap-hit .spark:nth-child(4) { --tx: -1.5vw; --ty: 1.5vw; animation-delay: 0.03s; }
.slap-hit .spark:nth-child(5) { --tx: 2.5vw; --ty: 0.5vw; }
.slap-hit .spark:nth-child(6) { --tx: -2.5vw; --ty: -0.5vw; animation-delay: 0.02s; }

/* Charged sparks - similar to slap but slightly larger travel */
.charged-hit .spark { animation: sparkOut 0.25s ease-out forwards; }
.charged-hit .spark:nth-child(1) { --tx: 2.2vw; --ty: -1.8vw; }
.charged-hit .spark:nth-child(2) { --tx: -2.2vw; --ty: -1.2vw; animation-delay: 0.02s; }
.charged-hit .spark:nth-child(3) { --tx: 1.8vw; --ty: 2vw; animation-delay: 0.01s; }
.charged-hit .spark:nth-child(4) { --tx: -1.8vw; --ty: 1.8vw; animation-delay: 0.03s; }
.charged-hit .spark:nth-child(5) { --tx: 2.5vw; --ty: 0.5vw; }
.charged-hit .spark:nth-child(6) { --tx: -2.5vw; --ty: -0.5vw; animation-delay: 0.02s; }

@keyframes sparkOut {
  0% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  100% {
    opacity: 0;
    transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(0.3);
  }
}

/* ============================================
   HIT PARTICLES - Small debris
   ============================================ */
.hit-particles {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  transform: translate(-50%, -50%);
  pointer-events: none;
}

.particle {
  position: absolute;
  width: 5px;
  height: 5px;
  border-radius: 50%;
  background: white;
  opacity: 0;
}

.particle:nth-child(1) { animation: particleFly 0.22s ease-out forwards; --px: -1.5vw; --py: -1.8vw; }
.particle:nth-child(2) { animation: particleFly 0.22s ease-out 0.02s forwards; --px: 1.8vw; --py: -1.2vw; }
.particle:nth-child(3) { animation: particleFly 0.22s ease-out 0.01s forwards; --px: -1vw; --py: 1.5vw; }
.particle:nth-child(4) { animation: particleFly 0.22s ease-out 0.03s forwards; --px: 1.2vw; --py: 1.8vw; }

@keyframes particleFly {
  0% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  100% {
    opacity: 0;
    transform: translate(calc(-50% + var(--px)), calc(-50% + var(--py))) scale(0.2);
  }
}
